# 积木报表数据源密码配置说明

## 一、密码格式说明

积木报表支持两种密码格式：

1. **明文密码**：直接存储数据库密码（不推荐，但可以用于初始化）
2. **加密密码**：以 `@JmAES` 或 `@JimuReportS` 开头（积木报表自动加密）

## 二、当前数据源分析

从导出的 `jimu_report_data_source.sql` 文件来看：

### 1. default_datasource（第58行）
- **状态**：密码是明文 `wzt123456`
- **数据库**：`ry-vue`（与系统数据库一致）
- **操作**：✅ **密码已正确，无需修改**

### 2. 其他数据源
- 大部分密码是加密的（`@JmAES...` 或 `@JimuReportS...`）
- 指向不同的数据库（`jimureport`、`jeecgboot2`、`ceshi` 等）
- 这些是**测试数据或示例数据**

## 三、推荐操作

### 方案1：只保留 default_datasource（推荐）

如果只需要使用系统数据库（ry-vue），可以：

1. **执行清理脚本**：`docs/sql/jimureport_cleanup_datasource.sql`
   - 会删除所有指向其他数据库的数据源
   - 只保留指向 `ry-vue` 的数据源

2. **验证密码**：
   - `default_datasource` 的密码已经是 `wzt123456`（与系统配置一致）
   - 如果密码不同，需要修改

### 方案2：保留所有数据源，只修改需要的

如果以后可能需要使用其他数据源：

1. **只修改 default_datasource 的密码**（如果与系统密码不一致）
2. **其他数据源保留**（如果不需要可以不管）

## 四、密码修改方法

### 方法1：在积木报表设计器中修改（推荐）

1. 访问积木报表设计器
2. 进入"数据源管理"
3. 编辑数据源，修改密码
4. 积木报表会自动加密密码

### 方法2：直接在数据库中修改

**注意**：如果使用明文密码，积木报表会在首次使用时自动加密。

```sql
-- 修改 default_datasource 的密码（如果与系统密码不一致）
UPDATE jimu_report_data_source 
SET db_password = 'wzt123456',  -- 改为实际的数据库密码
    update_time = NOW()
WHERE id = 'default_datasource';
```

## 五、执行建议

1. **检查 default_datasource**：
   - 当前密码：`wzt123456`
   - 系统配置密码：`wzt123456`（application-druid.yml）
   - ✅ **密码一致，无需修改**

2. **清理其他数据源**（可选）：
   - 执行 `docs/sql/jimureport_cleanup_datasource.sql`
   - 或手动删除不需要的数据源

3. **重启后端服务**

## 六、验证

执行清理脚本后，查询数据源：
```sql
SELECT id, name, db_type, db_url, db_username 
FROM jimu_report_data_source;
```

应该只看到指向 `ry-vue` 数据库的数据源。

