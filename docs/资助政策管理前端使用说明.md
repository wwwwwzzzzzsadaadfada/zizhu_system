# 资助政策管理前端使用说明

## 一、已创建的文件

1. **API接口文件**：`ruoyi-ui/src/api/system/subsidyPolicy.js`
2. **前端页面**：`ruoyi-ui/src/views/system/subsidyPolicy/index.vue`

## 二、需要配置的内容

### 1. 字典配置

需要在系统字典管理中配置以下字典：

**字典类型：`sys_policy_status`（政策状态）**
- 字典标签：草稿，字典值：0，字典排序：1
- 字典标签：已发布，字典值：1，字典排序：2
- 字典标签：已废止，字典值：2，字典排序：3

**配置步骤**：
1. 登录系统管理后台
2. 进入"系统管理" -> "字典管理"
3. 点击"新增"按钮
4. 字典名称：`sys_policy_status`
5. 字典类型：`sys_policy_status`
6. 状态：正常
7. 保存后，在字典数据中添加上述3条数据

### 2. 菜单配置

需要在系统菜单管理中配置资助政策管理菜单：

**菜单信息**：
- 菜单名称：资助政策管理
- 路由地址：`/system/subsidyPolicy`
- 组件路径：`system/subsidyPolicy/index`
- 菜单类型：菜单
- 显示状态：显示
- 菜单状态：正常

**权限标识**：
- `system:subsidyPolicy:list` - 查询
- `system:subsidyPolicy:query` - 详情
- `system:subsidyPolicy:add` - 新增
- `system:subsidyPolicy:edit` - 修改
- `system:subsidyPolicy:remove` - 删除
- `system:subsidyPolicy:export` - 导出
- `system:subsidyPolicy:publish` - 发布
- `system:subsidyPolicy:abolish` - 废止

### 3. 路由配置（可选）

如果系统使用动态路由，菜单配置后会自动生成路由。如果使用静态路由，需要在 `router/index.js` 中添加路由配置。

## 三、功能说明

### 1. 政策列表
- 支持按政策编号、政策名称、政策类型、状态查询
- 显示政策基本信息、状态、发布时间等
- 支持批量操作（删除、导出）

### 2. 新增/修改政策
- **基本信息**：政策编号（可自动生成）、名称、版本、类型、生效日期、失效日期、政策内容（富文本）、政策文件上传、备注
- **适用范围**：可配置多个适用范围，支持按学制、年级、学期、学年配置
- **关联套餐**：可选择多个补助套餐关联到政策

### 3. 政策发布
- 只能发布草稿状态的政策
- 发布前系统会自动验证必填项和冲突检测
- 发布后政策状态变为"已发布"，无法再修改

### 4. 政策废止
- 只能废止已发布状态的政策
- 需要填写废止原因
- 废止后政策状态变为"已废止"

### 5. 政策查看
- 查看政策完整信息
- 显示适用范围列表
- 显示关联套餐列表

## 四、注意事项

1. **政策编号**：如果创建时不填写，系统会自动生成（格式：ZC-YYYYMMDD-序号）

2. **状态控制**：
   - 只有草稿状态的政策可以修改和删除
   - 已发布或已废止的政策不允许修改和删除

3. **文件上传**：
   - 支持上传PDF、DOC、DOCX格式文件
   - 文件大小限制：10MB
   - 上传的文件会保存到服务器，路径存储在数据库中

4. **适用范围**：
   - 如果所有字段都为空，表示适用于所有情况
   - 可以配置多个适用范围

5. **关联套餐**：
   - 套餐信息会自动填充（名称、金额）
   - 可以选择多个套餐关联到一个政策

## 五、测试建议

1. **功能测试**：
   - 测试新增政策（填写完整信息）
   - 测试修改政策（草稿状态）
   - 测试发布政策
   - 测试废止政策
   - 测试删除政策（草稿状态）

2. **权限测试**：
   - 测试不同角色的权限控制
   - 确保无权限用户无法访问

3. **数据验证测试**：
   - 测试必填项验证
   - 测试日期验证（失效日期不能早于生效日期）
   - 测试发布时的冲突检测

4. **文件上传测试**：
   - 测试文件上传功能
   - 测试文件格式限制
   - 测试文件大小限制


