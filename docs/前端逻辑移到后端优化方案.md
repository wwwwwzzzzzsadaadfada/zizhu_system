# 前端逻辑移到后端优化方案

## 概述
将所有业务逻辑操作移到后端实现，前端只负责展示数据。

## 需要修改的地方

### 1. 后端需要添加的字段

#### 1.1 StSubsidyQuota（指标主表）
- [x] `hasCarriedOver` - 是否已结转（已完成）
- [ ] `economyCategoryText` - 经济分类文本（格式化后的文本，如"助学金、免学杂费"）

#### 1.2 StSubsidyQuotaDetail（指标明细表）
- [ ] `isEditable` - 是否可编辑（已分配或已结转的不可编辑）

#### 1.3 StSemesterBudget（学期预算表）
- [ ] `reclaimStatus` - 收回状态（"可收回"、"已使用"、"已锁定"）
- [ ] `reclaimStatusType` - 收回状态类型（"success"、"danger"、"warning"）
- [ ] `isReclaimable` - 是否可收回

### 2. 前端需要移除的计算逻辑

#### 2.1 统计计算
- [ ] `buildStatistics()` - 移除，使用后端返回的统计数据
- [ ] `displayStatistics` computed - 简化，直接使用后端数据
- [ ] `displayAllocatedStatLines` computed - 简化，直接使用后端数据

#### 2.2 经济分类文本
- [ ] `renderEconomyText()` - 移除，使用后端返回的 `economyCategoryText`

#### 2.3 明细可编辑性判断
- [ ] `detailHasAllocation()` - 移除，使用后端返回的字段
- [ ] `isCarryOverDetail()` - 移除，使用后端返回的字段
- [ ] `isDetailEditable()` - 移除，使用后端返回的 `isEditable`

#### 2.4 收回状态判断
- [ ] `isReclaimable()` - 移除，使用后端返回的 `isReclaimable`
- [ ] `getReclaimStatusText()` - 移除，使用后端返回的 `reclaimStatus`
- [ ] `getReclaimStatusType()` - 移除，使用后端返回的 `reclaimStatusType`

#### 2.5 其他计算
- [ ] `carryOverSourceAvailableQuota` computed - 简化，直接使用后端返回的 `availableQuota`
- [ ] `canCarryOver()` - 已使用后端字段，移除降级逻辑
- [ ] `hasCarriedOver()` - 已使用后端字段，移除降级逻辑

## 实施步骤

1. 在后端Mapper中添加计算字段
2. 在实体类中添加对应字段
3. 修改前端代码，移除计算逻辑，直接使用后端字段
4. 测试验证

